{"ast":null,"code":"import { ref, nextTick } from 'vue';\nimport { api } from '../apiRequset.js'; // const store = useStore()\n\nexport default {\n  __name: 'CurrentOrder',\n\n  setup(__props, {\n    expose\n  }) {\n    expose(); // import { useStore } from 'vuex'\n    // import { computed, isProxy, toRaw, nextTick } from 'vue'\n\n    const currentOrder = ref(); // const currentOrder = computed(() => {\n    //   if (isProxy(store.state.currentOrder)) {\n    //     //this If() block is not really necessary\n    //     return toRaw(store.state.currentOrder)\n    //   }\n    //   return null\n    // })\n\n    api.getCurrentOrder().then(response => {\n      currentOrder.value = response.data;\n    });\n\n    function changeStatus(item) {\n      api.changeOrderStatus({\n        orderId: item.orderId,\n        status: 3\n      }).then(response => {\n        console.log(response);\n      });\n      nextTick(() => {\n        item.status = item.status == 0 ? 1 : 0;\n        console.log(item.status);\n      });\n    }\n\n    const __returned__ = {\n      currentOrder,\n      changeStatus,\n      ref,\n      nextTick,\n      api\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AA8DA,SAASA,GAAT,EAAcC,QAAd,QAA8B,KAA9B;AACA,SAASC,GAAT,QAAoB,kBAApB,C,CACA;;;;;;;;cAJA;IACA;;IAIA,MAAMC,YAAY,GAAGH,GAAG,EAAxB,EACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEAE,GAAG,CAACE,eAAJ,GAAsBC,IAAtB,CAA4BC,QAAD,IAAc;MACvCH,YAAY,CAACI,KAAb,GAAqBD,QAAQ,CAACE,IAA9B;IACD,CAFD;;IAGA,SAASC,YAAT,CAAsBC,IAAtB,EAA4B;MAC1BR,GAAG,CACAS,iBADH,CACqB;QAAEC,OAAO,EAAEF,IAAI,CAACE,OAAhB;QAAyBC,MAAM,EAAE;MAAjC,CADrB,EAEGR,IAFH,CAESC,QAAD,IAAc;QAClBQ,OAAO,CAACC,GAAR,CAAYT,QAAZ;MACD,CAJH;MAKAL,QAAQ,CAAC,MAAM;QACbS,IAAI,CAACG,MAAL,GAAcH,IAAI,CAACG,MAAL,IAAe,CAAf,GAAmB,CAAnB,GAAuB,CAArC;QACAC,OAAO,CAACC,GAAR,CAAYL,IAAI,CAACG,MAAjB;MACD,CAHO,CAAR;IAID","names":["ref","nextTick","api","currentOrder","getCurrentOrder","then","response","value","data","changeStatus","item","changeOrderStatus","orderId","status","console","log"],"sources":["C:/Users/user/Desktop/admin/coreui-free-vue-admin-template-main/coreui-free-vue-admin-template-main/src/views/CurrentOrder.vue"],"sourcesContent":["<template>\n  <div>\n    <CForm>\n      <CTable align=\"middle\" class=\"mb-0 border\" hover responsive>\n        <CTableHead color=\"light\">\n          <CTableRow>\n            <CTableHeaderCell class=\"text-center\">菜名</CTableHeaderCell>\n            <CTableHeaderCell class=\"text-center\">數量</CTableHeaderCell>\n            <CTableHeaderCell class=\"text-center\">價錢</CTableHeaderCell>\n            <CTableHeaderCell class=\"text-center\">時間</CTableHeaderCell>\n          </CTableRow>\n        </CTableHead>\n        <template v-for=\"order in currentOrder\" :key=\"order.id\">\n          <div class=\"\">\n            <div class=\"row\">\n              <div class=\"col-sm-8\">訂單編號 : {{ order.id }}</div>\n              <div class=\"col-sm-4\">\n                <div v-if=\"order.status == 1\">\n                  <CFormSwitch\n                    id=\"formSwitchCheckChecked\"\n                    :checked=\"order.status == 2\"\n                    :label=\"是否已出餐\"\n                    @change=\"changeStatus(order)\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          <CTableBody>\n            <CTableRow\n              v-for=\"item in JSON.parse(order.content)\"\n              :key=\"item.name\"\n            >\n              <CTableDataCell class=\"text-center\">\n                <div>{{ item.name }}</div>\n              </CTableDataCell>\n              <CTableDataCell class=\"text-center\">\n                {{ item.num }}</CTableDataCell\n              >\n              <CTableDataCell class=\"text-center\">\n                <div class=\"clearfix\">\n                  <div>\n                    {{ item.price }}\n                  </div>\n                </div>\n              </CTableDataCell>\n              <CTableDataCell class=\"text-center\"\n                >{{ item.ctime }}\n              </CTableDataCell>\n            </CTableRow>\n            <CTableRow class=\"text-right\"\n              >小計: {{ order.totalPrice }}\n            </CTableRow>\n          </CTableBody>\n        </template>\n      </CTable></CForm\n    >\n  </div>\n</template>\n<script setup>\n// import { useStore } from 'vuex'\n// import { computed, isProxy, toRaw, nextTick } from 'vue'\nimport { ref, nextTick } from 'vue'\nimport { api } from '../apiRequset.js'\n// const store = useStore()\nconst currentOrder = ref()\n// const currentOrder = computed(() => {\n//   if (isProxy(store.state.currentOrder)) {\n//     //this If() block is not really necessary\n//     return toRaw(store.state.currentOrder)\n//   }\n//   return null\n// })\n\napi.getCurrentOrder().then((response) => {\n  currentOrder.value = response.data\n})\nfunction changeStatus(item) {\n  api\n    .changeOrderStatus({ orderId: item.orderId, status: 3 })\n    .then((response) => {\n      console.log(response)\n    })\n  nextTick(() => {\n    item.status = item.status == 0 ? 1 : 0\n    console.log(item.status)\n  })\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}