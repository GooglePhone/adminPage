{"ast":null,"code":"import { api } from '../apiRequset.js';\nimport { ref } from 'vue';\nexport default {\n  __name: 'OrderHistory',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const list = ref(null);\n    const currentPage = ref(1);\n    const totalPage = ref(0);\n    const size = ref(2);\n    search(currentPage.value);\n\n    function search(page) {\n      if (page < 1) return;\n      currentPage.value = page;\n      api.getHistory({\n        page: currentPage.value,\n        size: size.value\n      }).then(response => {\n        list.value = response.data.data;\n        currentPage.value = response.data.page;\n        totalPage.value = response.data.toatl / size.value;\n      });\n    }\n\n    const __returned__ = {\n      list,\n      currentPage,\n      totalPage,\n      size,\n      search,\n      api,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAyEA,SAASA,GAAT,QAAoB,kBAApB;AACA,SAASC,GAAT,QAAoB,KAApB;;;;;;;;IACA,MAAMC,IAAI,GAAGD,GAAG,CAAC,IAAD,CAAhB;IACA,MAAME,WAAW,GAAGF,GAAG,CAAC,CAAD,CAAvB;IACA,MAAMG,SAAS,GAAGH,GAAG,CAAC,CAAD,CAArB;IACA,MAAMI,IAAI,GAAGJ,GAAG,CAAC,CAAD,CAAhB;IACAK,MAAM,CAACH,WAAW,CAACI,KAAb,CAAN;;IACA,SAASD,MAAT,CAAgBE,IAAhB,EAAsB;MACpB,IAAIA,IAAI,GAAG,CAAX,EAAc;MACdL,WAAW,CAACI,KAAZ,GAAoBC,IAApB;MACAR,GAAG,CACAS,UADH,CACc;QAAED,IAAI,EAAEL,WAAW,CAACI,KAApB;QAA2BF,IAAI,EAAEA,IAAI,CAACE;MAAtC,CADd,EAEGG,IAFH,CAESC,QAAD,IAAc;QAClBT,IAAI,CAACK,KAAL,GAAaI,QAAQ,CAACC,IAAT,CAAcA,IAA3B;QACAT,WAAW,CAACI,KAAZ,GAAoBI,QAAQ,CAACC,IAAT,CAAcJ,IAAlC;QACAJ,SAAS,CAACG,KAAV,GAAkBI,QAAQ,CAACC,IAAT,CAAcC,KAAd,GAAsBR,IAAI,CAACE,KAA7C;MACD,CANH;IAOD","names":["api","ref","list","currentPage","totalPage","size","search","value","page","getHistory","then","response","data","toatl"],"sources":["C:/Users/user/Desktop/admin/coreui-free-vue-admin-template-main/coreui-free-vue-admin-template-main/src/views/OrderHistory.vue"],"sourcesContent":["<template>\n  <div>\n    <CForm>\n      <CTable align=\"middle\" class=\"mb-0 border\" hover responsive>\n        <CTableHead color=\"light\">\n          <CTableRow>\n            <CTableHeaderCell class=\"text-center\">\n              <CIcon name=\"cil-basket\" />訂單編號\n            </CTableHeaderCell>\n            <CTableHeaderCell class=\"text-center\">訂單內容</CTableHeaderCell>\n            <CTableHeaderCell class=\"text-center\">價錢</CTableHeaderCell>\n            <CTableHeaderCell class=\"text-center\">時間</CTableHeaderCell>\n            <CTableHeaderCell>狀態</CTableHeaderCell>\n          </CTableRow>\n        </CTableHead>\n        <CTableBody>\n          <CTableRow v-for=\"item in list\" :key=\"item.name\">\n            <CTableDataCell class=\"text-center\">\n              {{ item.id }}\n            </CTableDataCell>\n            <CTableDataCell class=\"text-center\">\n              <template v-for=\"dish in JSON.parse(item.content)\">\n                {{ dish.name }} x {{ dish.num }} &nbsp;\n              </template>\n              <!-- <div>{{ item.content }}</div> -->\n            </CTableDataCell>\n            <CTableDataCell class=\"text-center\">\n              <div class=\"clearfix\">\n                <div>\n                  {{ item.totalPrice }}\n                </div>\n              </div>\n            </CTableDataCell>\n            <CTableDataCell class=\"text-center\">\n              {{ item.ctime }}\n            </CTableDataCell>\n            <CTableDataCell>\n              <div>已結帳</div>\n            </CTableDataCell>\n          </CTableRow>\n          <CTableRow> </CTableRow>\n        </CTableBody> </CTable\n    ></CForm>\n    <CPagination aria-label=\"Page navigation example\" v-if=\"list !== null\">\n      <CPaginationItem\n        aria-label=\"Previous\"\n        :disabled=\"page == 1\"\n        @click=\"search(1)\"\n        ><span aria-hidden=\"true\">&laquo;</span></CPaginationItem\n      >\n      <CPaginationItem\n        aria-label=\"Previous\"\n        :disabled=\"currentPage == 1\"\n        @click=\"currentPage > 1 && search(--currentPage)\"\n        ><span aria-hidden=\"true\">&#60;</span></CPaginationItem\n      >\n      <CPaginationItem active>{{ currentPage }}</CPaginationItem>\n      <CPaginationItem\n        aria-label=\"Previous\"\n        :disabled=\"currentPage < totalPage\"\n        @click=\"search(++currentPage)\"\n        ><span aria-hidden=\"true\">&#62;</span></CPaginationItem\n      >\n      <CPaginationItem\n        aria-label=\"Next\"\n        :disabled=\"currentPage == totalPage\"\n        @click=\"search(totalPage)\"\n        ><span aria-hidden=\"true\">&raquo;</span></CPaginationItem\n      >\n    </CPagination>\n  </div>\n</template>\n<script setup>\nimport { api } from '../apiRequset.js'\nimport { ref } from 'vue'\nconst list = ref(null)\nconst currentPage = ref(1)\nconst totalPage = ref(0)\nconst size = ref(2)\nsearch(currentPage.value)\nfunction search(page) {\n  if (page < 1) return\n  currentPage.value = page\n  api\n    .getHistory({ page: currentPage.value, size: size.value })\n    .then((response) => {\n      list.value = response.data.data\n      currentPage.value = response.data.page\n      totalPage.value = response.data.toatl / size.value\n    })\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}